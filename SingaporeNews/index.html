<!DOCTYPE html>
<meta charset="utf-8">

<style>
  body {
    font: 10px sans-serif;
  }

  .axis path,
  .axis line {
    fill: none;
    stroke: #000;
    shape-rendering: crispEdges;
  }

  .x.axis path {
    display: none;
  }

  .line {
    fill: none;
    stroke: steelblue;
    stroke-width: 1.5px;
  }
</style>

<body>
<script src="http://d3js.org/d3.v3.js"></script>

<script>

var margin = {top: 20, right: 20, bottom: 30, left: 50},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;


d3.csv("transposed_terms.csv", function(error, data){
  var nested_data = d3.nest()
    .key(function(d){ return d.headline_year; })
    .entries(data);

  color.domain(d3.keys(
    nested_data[0]).filter(function(key){ return key == 'bomb' || key == 'blast'; }
    )
  );

  var headline_terms = color.domain().map(function(term){
      return {
          term: term,
          values: data.map(function(d){
              return {year: d.headline_year, term: +d[term]};
          })
      };
  });

  console.log(headline_terms);

  var mydata = data;
});

</script>

</body>
